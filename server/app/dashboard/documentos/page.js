(()=>{var e={};e.id=776,e.ids=[776],e.modules={5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},5528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},1877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},5319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},4300:e=>{"use strict";e.exports=require("buffer")},6113:e=>{"use strict";e.exports=require("crypto")},2361:e=>{"use strict";e.exports=require("events")},3685:e=>{"use strict";e.exports=require("http")},5687:e=>{"use strict";e.exports=require("https")},1808:e=>{"use strict";e.exports=require("net")},5477:e=>{"use strict";e.exports=require("punycode")},2781:e=>{"use strict";e.exports=require("stream")},4404:e=>{"use strict";e.exports=require("tls")},7310:e=>{"use strict";e.exports=require("url")},9796:e=>{"use strict";e.exports=require("zlib")},2144:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>n.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>c,routeModule:()=>x,tree:()=>d});var a=t(7096),r=t(6132),l=t(7284),n=t.n(l),i=t(2564),o={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>i[e]);t.d(s,o);let d=["",{children:["dashboard",{children:["documentos",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,9987)),"C:\\Users\\joeld\\OneDrive\\Escritorio\\GEP DHASBOARD\\app\\dashboard\\documentos\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,5581)),"C:\\Users\\joeld\\OneDrive\\Escritorio\\GEP DHASBOARD\\app\\dashboard\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,5345)),"C:\\Users\\joeld\\OneDrive\\Escritorio\\GEP DHASBOARD\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,9291,23)),"next/dist/client/components/not-found-error"]}],c=["C:\\Users\\joeld\\OneDrive\\Escritorio\\GEP DHASBOARD\\app\\dashboard\\documentos\\page.tsx"],u="/dashboard/documentos/page",m={require:t,loadChunk:()=>Promise.resolve()},x=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/dashboard/documentos/page",pathname:"/dashboard/documentos",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},4406:(e,s,t)=>{Promise.resolve().then(t.bind(t,9069))},9069:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>DocumentosPage});var a=t(784),r=t(9885),l=t(9708);let n="senado";async function obtenerDocumentos(){let{data:e,error:s}=await l.O.from(n).select("*").order("created_at",{ascending:!1});if(s)throw console.error("Error al obtener documentos:",s),s;return e||[]}async function buscarDocumentos(e){if(!e.trim())return obtenerDocumentos();let s=`%${e.toLowerCase()}%`,{data:t,error:a}=await l.O.from(n).select("*").or(`sinopsis.ilike.${s},iniciativa_tex.ilike.${s},temas.ilike.${s}`).order("created_at",{ascending:!1});if(a)throw console.error("Error al buscar documentos:",a),a;return t||[]}async function crearDocumento(e){let s={...e,created_at:new Date().toISOString()},{data:t,error:a}=await l.p.from(n).insert([s]).select().single();if(a)throw console.error("Error al crear documento:",a),a;return t}async function actualizarDocumento(e,s){let{data:t,error:a}=await l.p.from(n).update(s).eq("id_documento",e).select().single();if(a)throw console.error("Error al actualizar documento:",a),a;return t}async function eliminarDocumento(e){let{error:s}=await l.p.from(n).delete().eq("id_documento",e);if(s)throw console.error("Error al eliminar documento:",s),s}var i=t(3500);function TablaDocumentos({documentos:e,onEdit:s,onView:t,onRefresh:l,onSearch:n}){let[o,d]=(0,r.useState)(null),[c,u]=(0,r.useState)(!1),[m,x]=(0,r.useState)(null),[h,p]=(0,r.useState)(""),handleDelete=async e=>{if(o!==e){d(e);return}u(!0),x(null);try{await eliminarDocumento(e),l()}catch(e){console.error("Error al eliminar documento:",e),x(e.message||"Ha ocurrido un error al eliminar el documento")}finally{u(!1),d(null)}},formatearFecha=e=>{let s=new Date(e);return s.toLocaleDateString("es-MX",{day:"2-digit",month:"2-digit",year:"numeric"})},obtenerNombreFuente=e=>{switch(e){case"senado":return"Senado";case"camara":return"C\xe1mara de Diputados";case"dof":return"Diario Oficial de la Naci\xf3n";case"conamer":return"CONAMER";default:return e}};return(0,a.jsxs)("div",{children:[m&&a.jsx("div",{className:"bg-red-50 border-l-4 border-red-500 p-4 mb-4",children:a.jsx("div",{className:"flex",children:a.jsx("div",{className:"ml-3",children:a.jsx("p",{className:"text-sm text-red-700",children:m})})})}),a.jsx("div",{className:"mb-6",children:(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault(),n(h)},className:"flex",children:[(0,a.jsxs)("div",{className:"relative flex-grow",children:[a.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:a.jsx(i.U41,{className:"text-gray-400"})}),a.jsx("input",{type:"text",value:h,onChange:e=>p(e.target.value),className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"Buscar por t\xedtulo, texto o temas...",disabled:c})]}),a.jsx("button",{type:"submit",className:"ml-3 px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",disabled:c,children:"Buscar"})]})}),(0,a.jsxs)("div",{className:"bg-blue-100 text-blue-800 px-4 py-2 rounded-md font-medium mb-4",children:[e.length," documentos encontrados"]}),0===e.length?(0,a.jsxs)("div",{className:"text-center py-8 bg-white rounded-lg shadow-md",children:[a.jsx(i.ulB,{className:"mx-auto text-gray-400 text-5xl mb-4"}),a.jsx("p",{className:"text-gray-500",children:"No hay documentos que coincidan con tu b\xfasqueda"})]}):a.jsx("div",{className:"bg-white shadow-md rounded-lg overflow-hidden",children:a.jsx("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[a.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-24",children:"Fuente"}),a.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-1/3",children:"T\xedtulo"}),a.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-40",children:"Proponente"}),a.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-32",children:"Fecha Captura"}),a.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-40",children:"Temas"}),a.jsx("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider w-24",children:"Acciones"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:e.map(e=>(0,a.jsxs)("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:obtenerNombreFuente(e.fuente)})}),a.jsx("td",{className:"px-6 py-4",children:a.jsx("div",{className:"text-sm font-medium text-gray-900 line-clamp-2",children:e.sinopsis})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("div",{className:"text-sm text-gray-500 truncate max-w-[160px]",title:e.personas||"",children:e.personas?e.personas.length>25?`${e.personas.substring(0,25)}...`:e.personas:"-"})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("div",{className:"text-sm text-gray-500",children:formatearFecha(e.created_at)})}),a.jsx("td",{className:"px-6 py-4",children:a.jsx("div",{className:"text-sm text-gray-500 truncate max-w-[160px]",title:e.temas||"",children:e.temas||"-"})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:(0,a.jsxs)("div",{className:"flex justify-end space-x-2",children:[a.jsx("button",{onClick:()=>t(e),className:"text-blue-600 hover:text-blue-900",disabled:c,children:a.jsx(i.dSq,{})}),a.jsx("button",{onClick:()=>s(e),className:"text-indigo-600 hover:text-indigo-900",disabled:c,children:a.jsx(i.fmQ,{})}),a.jsx("button",{onClick:()=>handleDelete(e.id_documento),className:`${o===e.id_documento?"text-red-600 bg-red-100 p-1 rounded":"text-red-600 hover:text-red-900"}`,disabled:c,children:a.jsx(i.Xm5,{})})]})})]},e.id_documento))})]})})})]})}function DocumentoModal({isOpen:e,onClose:s,onSuccess:t,documentoActual:l}){let[n,o]=(0,r.useState)(""),[d,c]=(0,r.useState)(""),[u,m]=(0,r.useState)(""),[x,h]=(0,r.useState)(""),[p,b]=(0,r.useState)(""),[g,f]=(0,r.useState)("senado"),[j,y]=(0,r.useState)(""),[v,N]=(0,r.useState)(""),[w,k]=(0,r.useState)(""),[D,_]=(0,r.useState)(""),[C,S]=(0,r.useState)(""),[E,P]=(0,r.useState)(""),[q,A]=(0,r.useState)(""),[F,O]=(0,r.useState)(""),[I,G]=(0,r.useState)(""),[L,M]=(0,r.useState)(!1),[$,T]=(0,r.useState)(null),[R,B]=(0,r.useState)("general");(0,r.useEffect)(()=>{e&&(l?(o(l.sinopsis||""),c(l.iniciativa_tex||""),m(l.iniciativa_id||""),h(l.gaceta||""),b(l.link_iniciativa||""),f(l.fuente||"senado"),y(l.imagen_link||""),N(l.temas||""),k(l.personas||""),_(l.partidos||""),S(l.leyes||""),P(l.resumen||""),A(l.analisis||""),O(l.objeto||""),G(l.correspondencia||"")):(o(""),c(""),m(""),h(""),b(""),f("senado"),y(""),N(""),k(""),_(""),S(""),P(""),A(""),O(""),G("")),T(null),B("general"))},[e,l]);let handleSubmit=async e=>{if(e.preventDefault(),!n.trim()){T("La sinopsis del documento es obligatoria");return}M(!0),T(null);try{let e={sinopsis:n,iniciativa_tex:d||null,iniciativa_id:u||null,gaceta:x||null,link_iniciativa:p||null,fuente:g,imagen_link:j||null,temas:v||null,personas:w||null,partidos:D||null,leyes:C||null,resumen:E||null,analisis:q||null,objeto:F||null,correspondencia:I||null};l?.id_documento?await actualizarDocumento(l.id_documento,e):await crearDocumento(e),t(),s()}catch(e){console.error("Error al guardar documento:",e),T(e.message||"Ha ocurrido un error al guardar el documento")}finally{M(!1)}};return e?a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center p-4 overflow-y-auto",children:a.jsx("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-4xl max-h-[90vh] overflow-hidden",children:(0,a.jsxs)("div",{className:"flex flex-col h-full",children:[(0,a.jsxs)("div",{className:"p-6 border-b flex justify-between items-center",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:l?"Editar Documento":"Nuevo Documento"}),a.jsx("button",{onClick:s,className:"text-gray-500 hover:text-gray-700",disabled:L,children:a.jsx("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),$&&a.jsx("div",{className:"mx-6 mt-4 p-3 bg-red-50 border-l-4 border-red-500 text-red-700",children:$}),(0,a.jsxs)("div",{className:"flex border-b",children:[a.jsx("button",{className:`px-6 py-3 font-medium ${"general"===R?"border-b-2 border-blue-500 text-blue-600":"text-gray-500 hover:text-gray-700"}`,onClick:()=>B("general"),children:"Informaci\xf3n General"}),a.jsx("button",{className:`px-6 py-3 font-medium ${"detalles"===R?"border-b-2 border-blue-500 text-blue-600":"text-gray-500 hover:text-gray-700"}`,onClick:()=>B("detalles"),children:"Detalles"}),a.jsx("button",{className:`px-6 py-3 font-medium ${"analisis"===R?"border-b-2 border-blue-500 text-blue-600":"text-gray-500 hover:text-gray-700"}`,onClick:()=>B("analisis"),children:"An\xe1lisis"})]}),a.jsx("div",{className:"p-6 overflow-y-auto flex-grow",children:(0,a.jsxs)("form",{onSubmit:handleSubmit,children:["general"===R&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{htmlFor:"sinopsis",className:"block text-sm font-medium text-gray-700 mb-1",children:"Sinopsis / T\xedtulo *"}),a.jsx("input",{type:"text",id:"sinopsis",value:n,onChange:e=>o(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Ingrese el t\xedtulo o sinopsis del documento",disabled:L,required:!0})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{htmlFor:"fuente",className:"block text-sm font-medium text-gray-700 mb-1",children:"Fuente"}),(0,a.jsxs)("select",{id:"fuente",value:g,onChange:e=>f(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:L,children:[a.jsx("option",{value:"senado",children:"Senado"}),a.jsx("option",{value:"camara",children:"C\xe1mara de Diputados"}),a.jsx("option",{value:"dof",children:"Diario Oficial de la Naci\xf3n"}),a.jsx("option",{value:"conamer",children:"CONAMER"}),a.jsx("option",{value:"otro",children:"Otro"})]})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{htmlFor:"iniciativaTex",className:"block text-sm font-medium text-gray-700 mb-1",children:"Texto de la Iniciativa"}),a.jsx("input",{type:"text",id:"iniciativaTex",value:d,onChange:e=>c(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Texto de la iniciativa",disabled:L})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{htmlFor:"iniciativaId",className:"block text-sm font-medium text-gray-700 mb-1",children:"ID de la Iniciativa"}),a.jsx("input",{type:"text",id:"iniciativaId",value:u,onChange:e=>m(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"ID de la iniciativa",disabled:L})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{htmlFor:"gaceta",className:"block text-sm font-medium text-gray-700 mb-1",children:"Gaceta"}),a.jsx("input",{type:"text",id:"gaceta",value:x,onChange:e=>h(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Gaceta",disabled:L})]})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{htmlFor:"linkIniciativa",className:"block text-sm font-medium text-gray-700 mb-1",children:"Link de la Iniciativa"}),(0,a.jsxs)("div",{className:"flex",children:[a.jsx("span",{className:"inline-flex items-center px-3 rounded-l-md border border-r-0 border-gray-300 bg-gray-50 text-gray-500",children:a.jsx(i.gjK,{})}),a.jsx("input",{type:"url",id:"linkIniciativa",value:p,onChange:e=>b(e.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-r-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"https://ejemplo.com/iniciativa",disabled:L})]})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{htmlFor:"imagenLink",className:"block text-sm font-medium text-gray-700 mb-1",children:"Link de la Imagen"}),(0,a.jsxs)("div",{className:"flex",children:[a.jsx("span",{className:"inline-flex items-center px-3 rounded-l-md border border-r-0 border-gray-300 bg-gray-50 text-gray-500",children:a.jsx(i.H3h,{})}),a.jsx("input",{type:"url",id:"imagenLink",value:j,onChange:e=>y(e.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-r-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"https://ejemplo.com/imagen.jpg",disabled:L})]})]})]}),"detalles"===R&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{htmlFor:"temas",className:"block text-sm font-medium text-gray-700 mb-1",children:"Temas"}),a.jsx("input",{type:"text",id:"temas",value:v,onChange:e=>N(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Temas relacionados (separados por comas)",disabled:L})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{htmlFor:"personas",className:"block text-sm font-medium text-gray-700 mb-1",children:"Personas"}),a.jsx("input",{type:"text",id:"personas",value:w,onChange:e=>k(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Personas relacionadas",disabled:L})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{htmlFor:"partidos",className:"block text-sm font-medium text-gray-700 mb-1",children:"Partidos"}),a.jsx("input",{type:"text",id:"partidos",value:D,onChange:e=>_(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Partidos pol\xedticos",disabled:L})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{htmlFor:"leyes",className:"block text-sm font-medium text-gray-700 mb-1",children:"Leyes"}),a.jsx("input",{type:"text",id:"leyes",value:C,onChange:e=>S(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Leyes relacionadas",disabled:L})]})]}),"analisis"===R&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{htmlFor:"resumen",className:"block text-sm font-medium text-gray-700 mb-1",children:"Resumen"}),a.jsx("textarea",{id:"resumen",value:E,onChange:e=>P(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Resumen del documento",rows:3,disabled:L})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{htmlFor:"analisis",className:"block text-sm font-medium text-gray-700 mb-1",children:"An\xe1lisis"}),a.jsx("textarea",{id:"analisis",value:q,onChange:e=>A(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"An\xe1lisis del documento",rows:3,disabled:L})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{htmlFor:"objeto",className:"block text-sm font-medium text-gray-700 mb-1",children:"Objeto"}),a.jsx("textarea",{id:"objeto",value:F,onChange:e=>O(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Objeto del documento",rows:3,disabled:L})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{htmlFor:"correspondencia",className:"block text-sm font-medium text-gray-700 mb-1",children:"Correspondencia"}),a.jsx("textarea",{id:"correspondencia",value:I,onChange:e=>G(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Correspondencia",rows:3,disabled:L})]})]}),(0,a.jsxs)("div",{className:"mt-6 flex justify-end space-x-3 sticky bottom-0 bg-white p-4 border-t",children:[a.jsx("button",{type:"button",onClick:s,className:"px-5 py-2.5 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 font-medium",disabled:L,children:"Cancelar"}),a.jsx("button",{type:"submit",className:"px-5 py-2.5 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 font-medium",disabled:L,children:L?(0,a.jsxs)("span",{className:"flex items-center",children:[(0,a.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[a.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),a.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Guardando..."]}):l?"Actualizar":"Crear"})]})]})})]})})}):null}var o=t(2451),d=t.n(o);function DetalleDocumento({documento:e,onBack:s}){let[t,l]=(0,r.useState)("general");return(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:[a.jsx("div",{className:"p-6 border-b flex justify-between items-center",children:(0,a.jsxs)("div",{className:"flex items-center",children:[a.jsx("button",{onClick:s,className:"mr-4 text-gray-500 hover:text-gray-700",children:a.jsx(i.x_l,{})}),a.jsx("h1",{className:"text-xl font-semibold text-gray-800",children:"Detalle del Documento"})]})}),(0,a.jsxs)("div",{className:"p-6",children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:e.sinopsis}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[(0,a.jsxs)("div",{className:"flex items-center text-gray-600",children:[a.jsx(i.IiJ,{className:"mr-2"}),(0,a.jsxs)("span",{children:["Fecha: ",(e=>{let s=new Date(e);return s.toLocaleDateString("es-MX",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})})(e.created_at)]})]}),(0,a.jsxs)("div",{className:"flex items-center text-gray-600",children:[a.jsx(i.mGS,{className:"mr-2"}),(0,a.jsxs)("span",{children:["Fuente: ",(e=>{switch(e){case"senado":return"Senado";case"camara":return"C\xe1mara de Diputados";case"dof":return"Diario Oficial de la Naci\xf3n";case"conamer":return"CONAMER";default:return e}})(e.fuente)]})]}),e.iniciativa_id&&(0,a.jsxs)("div",{className:"flex items-center text-gray-600",children:[a.jsx(i.mGS,{className:"mr-2"}),(0,a.jsxs)("span",{children:["ID: ",e.iniciativa_id]})]})]}),e.imagen_link&&a.jsx("div",{className:"mb-6",children:a.jsx("div",{className:"relative h-64 w-full",children:a.jsx(d(),{src:e.imagen_link,alt:e.sinopsis,fill:!0,style:{objectFit:"cover"},className:"rounded-lg"})})}),(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsxs)("div",{className:"flex border-b",children:[a.jsx("button",{className:`px-4 py-2 font-medium ${"general"===t?"border-b-2 border-blue-500 text-blue-600":"text-gray-500"}`,onClick:()=>l("general"),children:"Informaci\xf3n General"}),a.jsx("button",{className:`px-4 py-2 font-medium ${"detalles"===t?"border-b-2 border-blue-500 text-blue-600":"text-gray-500"}`,onClick:()=>l("detalles"),children:"Detalles"}),a.jsx("button",{className:`px-4 py-2 font-medium ${"analisis"===t?"border-b-2 border-blue-500 text-blue-600":"text-gray-500"}`,onClick:()=>l("analisis"),children:"An\xe1lisis"})]}),(0,a.jsxs)("div",{className:"mt-4",children:["general"===t&&(0,a.jsxs)("div",{className:"space-y-4",children:[e.iniciativa_tex&&(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"text-lg font-medium text-gray-800 mb-2",children:"Texto de la Iniciativa"}),a.jsx("p",{className:"text-gray-700",children:e.iniciativa_tex})]}),e.gaceta&&(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"text-lg font-medium text-gray-800 mb-2",children:"Gaceta"}),a.jsx("p",{className:"text-gray-700",children:e.gaceta})]}),e.link_iniciativa&&(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"text-lg font-medium text-gray-800 mb-2",children:"Link de la Iniciativa"}),(0,a.jsxs)("a",{href:e.link_iniciativa,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline flex items-center",children:[a.jsx(i.gjK,{className:"mr-2"}),e.link_iniciativa]})]})]}),"detalles"===t&&(0,a.jsxs)("div",{className:"space-y-4",children:[e.temas&&(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"text-lg font-medium text-gray-800 mb-2",children:"Temas"}),a.jsx("div",{className:"flex flex-wrap gap-2",children:e.temas.split(",").map((e,s)=>a.jsx("span",{className:"bg-blue-100 text-blue-800 px-2 py-1 rounded-full text-sm",children:e.trim()},s))})]}),e.personas&&(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"text-lg font-medium text-gray-800 mb-2",children:"Personas"}),(0,a.jsxs)("div",{className:"flex items-center",children:[a.jsx(i.Xws,{className:"text-gray-500 mr-2"}),a.jsx("p",{className:"text-gray-700",children:e.personas})]})]}),e.partidos&&(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"text-lg font-medium text-gray-800 mb-2",children:"Partidos"}),(0,a.jsxs)("div",{className:"flex items-center",children:[a.jsx(i.m17,{className:"text-gray-500 mr-2"}),a.jsx("p",{className:"text-gray-700",children:e.partidos})]})]}),e.leyes&&(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"text-lg font-medium text-gray-800 mb-2",children:"Leyes"}),(0,a.jsxs)("div",{className:"flex items-center",children:[a.jsx(i.Mp$,{className:"text-gray-500 mr-2"}),a.jsx("p",{className:"text-gray-700",children:e.leyes})]})]})]}),"analisis"===t&&(0,a.jsxs)("div",{className:"space-y-4",children:[e.resumen&&(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"text-lg font-medium text-gray-800 mb-2",children:"Resumen"}),a.jsx("p",{className:"text-gray-700 whitespace-pre-line",children:e.resumen})]}),e.analisis&&(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"text-lg font-medium text-gray-800 mb-2",children:"An\xe1lisis"}),a.jsx("p",{className:"text-gray-700 whitespace-pre-line",children:e.analisis})]}),e.objeto&&(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"text-lg font-medium text-gray-800 mb-2",children:"Objeto"}),a.jsx("p",{className:"text-gray-700 whitespace-pre-line",children:e.objeto})]}),e.correspondencia&&(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"text-lg font-medium text-gray-800 mb-2",children:"Correspondencia"}),a.jsx("p",{className:"text-gray-700 whitespace-pre-line",children:e.correspondencia})]})]})]})]}),a.jsx("div",{className:"flex justify-end",children:a.jsx("button",{onClick:s,className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",children:"Volver"})})]})]})}function DocumentosPage(){let[e,s]=(0,r.useState)([]),[t,l]=(0,r.useState)(null),[n,o]=(0,r.useState)(!1),[d,c]=(0,r.useState)(!1),[u,m]=(0,r.useState)(!0),[x,h]=(0,r.useState)(null);(0,r.useEffect)(()=>{cargarDocumentos()},[]);let cargarDocumentos=async()=>{m(!0),h(null);try{let e=await obtenerDocumentos();s(e)}catch(e){console.error("Error al cargar documentos:",e),h("Error al cargar los documentos: "+(e.message||"Error desconocido"))}finally{m(!1)}},handleSearch=async e=>{m(!0),h(null);try{let t=await buscarDocumentos(e);s(t)}catch(e){console.error("Error al buscar documentos:",e),h("Error al buscar documentos: "+(e.message||"Error desconocido"))}finally{m(!1)}};return u&&0===e.length?a.jsx("div",{className:"flex justify-center items-center h-screen",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):(0,a.jsxs)("div",{className:"container mx-auto p-4",children:[(0,a.jsxs)("div",{className:"mb-6 flex justify-between items-center",children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Documentos Capturados"}),(0,a.jsxs)("button",{onClick:()=>{l(null),o(!0)},className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 focus:outline-none flex items-center",children:[a.jsx(i.wEH,{className:"mr-2"}),"Nuevo Documento"]})]}),x&&a.jsx("div",{className:"bg-red-50 border-l-4 border-red-500 p-4 mb-4",children:a.jsx("div",{className:"flex",children:a.jsx("div",{className:"ml-3",children:a.jsx("p",{className:"text-sm text-red-700",children:x})})})}),d&&t?a.jsx(DetalleDocumento,{documento:t,onBack:()=>{c(!1),l(null)}}):a.jsx(TablaDocumentos,{documentos:e,onEdit:e=>{l(e),o(!0)},onView:e=>{l(e),c(!0)},onRefresh:cargarDocumentos,onSearch:handleSearch}),a.jsx(DocumentoModal,{isOpen:n,onClose:()=>{o(!1),l(null)},onSuccess:cargarDocumentos,documentoActual:t})]})}},9987:(e,s,t)=>{"use strict";t.r(s),t.d(s,{$$typeof:()=>n,__esModule:()=>l,default:()=>o});var a=t(5153);let r=(0,a.createProxy)(String.raw`C:\Users\joeld\OneDrive\Escritorio\GEP DHASBOARD\app\dashboard\documentos\page.tsx`),{__esModule:l,$$typeof:n}=r,i=r.default,o=i}};var s=require("../../../webpack-runtime.js");s.C(e);var __webpack_exec__=e=>s(s.s=e),t=s.X(0,[862,322,440,451,500,890,623,39],()=>__webpack_exec__(2144));module.exports=t})();
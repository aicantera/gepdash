(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[776],{1909:function(e,t,s){Promise.resolve().then(s.bind(s,3626))},3626:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return DocumentosPage}});var a=s(7437),r=s(2265),l=s(2899);let n="senado";async function obtenerDocumentos(){let{data:e,error:t}=await l.O.from(n).select("*").order("created_at",{ascending:!1});if(t)throw console.error("Error al obtener documentos:",t),t;return e||[]}async function buscarDocumentos(e){if(!e.trim())return obtenerDocumentos();let t="%".concat(e.toLowerCase(),"%"),{data:s,error:a}=await l.O.from(n).select("*").or("sinopsis.ilike.".concat(t,",iniciativa_tex.ilike.").concat(t,",temas.ilike.").concat(t)).order("created_at",{ascending:!1});if(a)throw console.error("Error al buscar documentos:",a),a;return s||[]}async function crearDocumento(e){let t={...e,created_at:new Date().toISOString()},{data:s,error:a}=await l.p.from(n).insert([t]).select().single();if(a)throw console.error("Error al crear documento:",a),a;return s}async function actualizarDocumento(e,t){let{data:s,error:a}=await l.p.from(n).update(t).eq("id_documento",e).select().single();if(a)throw console.error("Error al actualizar documento:",a),a;return s}async function eliminarDocumento(e){let{error:t}=await l.p.from(n).delete().eq("id_documento",e);if(t)throw console.error("Error al eliminar documento:",t),t}var i=s(3159);function TablaDocumentos(e){let{documentos:t,onEdit:s,onView:l,onRefresh:n,onSearch:o}=e,[c,d]=(0,r.useState)(null),[u,m]=(0,r.useState)(!1),[x,h]=(0,r.useState)(null),[g,b]=(0,r.useState)(""),handleDelete=async e=>{if(c!==e){d(e);return}m(!0),h(null);try{await eliminarDocumento(e),n()}catch(e){console.error("Error al eliminar documento:",e),h(e.message||"Ha ocurrido un error al eliminar el documento")}finally{m(!1),d(null)}},formatearFecha=e=>{let t=new Date(e);return t.toLocaleDateString("es-MX",{day:"2-digit",month:"2-digit",year:"numeric"})},obtenerNombreFuente=e=>{switch(e){case"senado":return"Senado";case"camara":return"C\xe1mara de Diputados";case"dof":return"Diario Oficial de la Naci\xf3n";case"conamer":return"CONAMER";default:return e}};return(0,a.jsxs)("div",{children:[x&&(0,a.jsx)("div",{className:"bg-red-50 border-l-4 border-red-500 p-4 mb-4",children:(0,a.jsx)("div",{className:"flex",children:(0,a.jsx)("div",{className:"ml-3",children:(0,a.jsx)("p",{className:"text-sm text-red-700",children:x})})})}),(0,a.jsx)("div",{className:"mb-6",children:(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault(),o(g)},className:"flex",children:[(0,a.jsxs)("div",{className:"relative flex-grow",children:[(0,a.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,a.jsx)(i.U41,{className:"text-gray-400"})}),(0,a.jsx)("input",{type:"text",value:g,onChange:e=>b(e.target.value),className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"Buscar por t\xedtulo, texto o temas...",disabled:u})]}),(0,a.jsx)("button",{type:"submit",className:"ml-3 px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",disabled:u,children:"Buscar"})]})}),(0,a.jsxs)("div",{className:"bg-blue-100 text-blue-800 px-4 py-2 rounded-md font-medium mb-4",children:[t.length," documentos encontrados"]}),0===t.length?(0,a.jsxs)("div",{className:"text-center py-8 bg-white rounded-lg shadow-md",children:[(0,a.jsx)(i.ulB,{className:"mx-auto text-gray-400 text-5xl mb-4"}),(0,a.jsx)("p",{className:"text-gray-500",children:"No hay documentos que coincidan con tu b\xfasqueda"})]}):(0,a.jsx)("div",{className:"bg-white shadow-md rounded-lg overflow-hidden",children:(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,a.jsx)("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-24",children:"Fuente"}),(0,a.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-1/3",children:"T\xedtulo"}),(0,a.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-40",children:"Proponente"}),(0,a.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-32",children:"Fecha Captura"}),(0,a.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-40",children:"Temas"}),(0,a.jsx)("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider w-24",children:"Acciones"})]})}),(0,a.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map(e=>(0,a.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:obtenerNombreFuente(e.fuente)})}),(0,a.jsx)("td",{className:"px-6 py-4",children:(0,a.jsx)("div",{className:"text-sm font-medium text-gray-900 line-clamp-2",children:e.sinopsis})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsx)("div",{className:"text-sm text-gray-500 truncate max-w-[160px]",title:e.personas||"",children:e.personas?e.personas.length>25?"".concat(e.personas.substring(0,25),"..."):e.personas:"-"})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsx)("div",{className:"text-sm text-gray-500",children:formatearFecha(e.created_at)})}),(0,a.jsx)("td",{className:"px-6 py-4",children:(0,a.jsx)("div",{className:"text-sm text-gray-500 truncate max-w-[160px]",title:e.temas||"",children:e.temas||"-"})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:(0,a.jsxs)("div",{className:"flex justify-end space-x-2",children:[(0,a.jsx)("button",{onClick:()=>l(e),className:"text-blue-600 hover:text-blue-900",disabled:u,children:(0,a.jsx)(i.dSq,{})}),(0,a.jsx)("button",{onClick:()=>s(e),className:"text-indigo-600 hover:text-indigo-900",disabled:u,children:(0,a.jsx)(i.fmQ,{})}),(0,a.jsx)("button",{onClick:()=>handleDelete(e.id_documento),className:"".concat(c===e.id_documento?"text-red-600 bg-red-100 p-1 rounded":"text-red-600 hover:text-red-900"),disabled:u,children:(0,a.jsx)(i.Xm5,{})})]})})]},e.id_documento))})]})})})]})}function DocumentoModal(e){let{isOpen:t,onClose:s,onSuccess:l,documentoActual:n}=e,[o,c]=(0,r.useState)(""),[d,u]=(0,r.useState)(""),[m,x]=(0,r.useState)(""),[h,g]=(0,r.useState)(""),[b,p]=(0,r.useState)(""),[f,j]=(0,r.useState)("senado"),[y,v]=(0,r.useState)(""),[N,w]=(0,r.useState)(""),[C,k]=(0,r.useState)(""),[_,I]=(0,r.useState)(""),[D,S]=(0,r.useState)(""),[O,E]=(0,r.useState)(""),[A,F]=(0,r.useState)(""),[T,z]=(0,r.useState)(""),[M,P]=(0,r.useState)(""),[L,J]=(0,r.useState)(!1),[G,X]=(0,r.useState)(null),[B,R]=(0,r.useState)("general");(0,r.useEffect)(()=>{t&&(n?(c(n.sinopsis||""),u(n.iniciativa_tex||""),x(n.iniciativa_id||""),g(n.gaceta||""),p(n.link_iniciativa||""),j(n.fuente||"senado"),v(n.imagen_link||""),w(n.temas||""),k(n.personas||""),I(n.partidos||""),S(n.leyes||""),E(n.resumen||""),F(n.analisis||""),z(n.objeto||""),P(n.correspondencia||"")):(c(""),u(""),x(""),g(""),p(""),j("senado"),v(""),w(""),k(""),I(""),S(""),E(""),F(""),z(""),P("")),X(null),R("general"))},[t,n]);let handleSubmit=async e=>{if(e.preventDefault(),!o.trim()){X("La sinopsis del documento es obligatoria");return}J(!0),X(null);try{let e={sinopsis:o,iniciativa_tex:d||null,iniciativa_id:m||null,gaceta:h||null,link_iniciativa:b||null,fuente:f,imagen_link:y||null,temas:N||null,personas:C||null,partidos:_||null,leyes:D||null,resumen:O||null,analisis:A||null,objeto:T||null,correspondencia:M||null};(null==n?void 0:n.id_documento)?await actualizarDocumento(n.id_documento,e):await crearDocumento(e),l(),s()}catch(e){console.error("Error al guardar documento:",e),X(e.message||"Ha ocurrido un error al guardar el documento")}finally{J(!1)}};return t?(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center p-4 overflow-y-auto",children:(0,a.jsx)("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-4xl max-h-[90vh] overflow-hidden",children:(0,a.jsxs)("div",{className:"flex flex-col h-full",children:[(0,a.jsxs)("div",{className:"p-6 border-b flex justify-between items-center",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-800",children:n?"Editar Documento":"Nuevo Documento"}),(0,a.jsx)("button",{onClick:s,className:"text-gray-500 hover:text-gray-700",disabled:L,children:(0,a.jsx)("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),G&&(0,a.jsx)("div",{className:"mx-6 mt-4 p-3 bg-red-50 border-l-4 border-red-500 text-red-700",children:G}),(0,a.jsxs)("div",{className:"flex border-b",children:[(0,a.jsx)("button",{className:"px-6 py-3 font-medium ".concat("general"===B?"border-b-2 border-blue-500 text-blue-600":"text-gray-500 hover:text-gray-700"),onClick:()=>R("general"),children:"Informaci\xf3n General"}),(0,a.jsx)("button",{className:"px-6 py-3 font-medium ".concat("detalles"===B?"border-b-2 border-blue-500 text-blue-600":"text-gray-500 hover:text-gray-700"),onClick:()=>R("detalles"),children:"Detalles"}),(0,a.jsx)("button",{className:"px-6 py-3 font-medium ".concat("analisis"===B?"border-b-2 border-blue-500 text-blue-600":"text-gray-500 hover:text-gray-700"),onClick:()=>R("analisis"),children:"An\xe1lisis"})]}),(0,a.jsx)("div",{className:"p-6 overflow-y-auto flex-grow",children:(0,a.jsxs)("form",{onSubmit:handleSubmit,children:["general"===B&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"sinopsis",className:"block text-sm font-medium text-gray-700 mb-1",children:"Sinopsis / T\xedtulo *"}),(0,a.jsx)("input",{type:"text",id:"sinopsis",value:o,onChange:e=>c(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Ingrese el t\xedtulo o sinopsis del documento",disabled:L,required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"fuente",className:"block text-sm font-medium text-gray-700 mb-1",children:"Fuente"}),(0,a.jsxs)("select",{id:"fuente",value:f,onChange:e=>j(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:L,children:[(0,a.jsx)("option",{value:"senado",children:"Senado"}),(0,a.jsx)("option",{value:"camara",children:"C\xe1mara de Diputados"}),(0,a.jsx)("option",{value:"dof",children:"Diario Oficial de la Naci\xf3n"}),(0,a.jsx)("option",{value:"conamer",children:"CONAMER"}),(0,a.jsx)("option",{value:"otro",children:"Otro"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"iniciativaTex",className:"block text-sm font-medium text-gray-700 mb-1",children:"Texto de la Iniciativa"}),(0,a.jsx)("input",{type:"text",id:"iniciativaTex",value:d,onChange:e=>u(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Texto de la iniciativa",disabled:L})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"iniciativaId",className:"block text-sm font-medium text-gray-700 mb-1",children:"ID de la Iniciativa"}),(0,a.jsx)("input",{type:"text",id:"iniciativaId",value:m,onChange:e=>x(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"ID de la iniciativa",disabled:L})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"gaceta",className:"block text-sm font-medium text-gray-700 mb-1",children:"Gaceta"}),(0,a.jsx)("input",{type:"text",id:"gaceta",value:h,onChange:e=>g(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Gaceta",disabled:L})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"linkIniciativa",className:"block text-sm font-medium text-gray-700 mb-1",children:"Link de la Iniciativa"}),(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsx)("span",{className:"inline-flex items-center px-3 rounded-l-md border border-r-0 border-gray-300 bg-gray-50 text-gray-500",children:(0,a.jsx)(i.gjK,{})}),(0,a.jsx)("input",{type:"url",id:"linkIniciativa",value:b,onChange:e=>p(e.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-r-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"https://ejemplo.com/iniciativa",disabled:L})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"imagenLink",className:"block text-sm font-medium text-gray-700 mb-1",children:"Link de la Imagen"}),(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsx)("span",{className:"inline-flex items-center px-3 rounded-l-md border border-r-0 border-gray-300 bg-gray-50 text-gray-500",children:(0,a.jsx)(i.H3h,{})}),(0,a.jsx)("input",{type:"url",id:"imagenLink",value:y,onChange:e=>v(e.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-r-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"https://ejemplo.com/imagen.jpg",disabled:L})]})]})]}),"detalles"===B&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"temas",className:"block text-sm font-medium text-gray-700 mb-1",children:"Temas"}),(0,a.jsx)("input",{type:"text",id:"temas",value:N,onChange:e=>w(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Temas relacionados (separados por comas)",disabled:L})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"personas",className:"block text-sm font-medium text-gray-700 mb-1",children:"Personas"}),(0,a.jsx)("input",{type:"text",id:"personas",value:C,onChange:e=>k(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Personas relacionadas",disabled:L})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"partidos",className:"block text-sm font-medium text-gray-700 mb-1",children:"Partidos"}),(0,a.jsx)("input",{type:"text",id:"partidos",value:_,onChange:e=>I(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Partidos pol\xedticos",disabled:L})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"leyes",className:"block text-sm font-medium text-gray-700 mb-1",children:"Leyes"}),(0,a.jsx)("input",{type:"text",id:"leyes",value:D,onChange:e=>S(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Leyes relacionadas",disabled:L})]})]}),"analisis"===B&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"resumen",className:"block text-sm font-medium text-gray-700 mb-1",children:"Resumen"}),(0,a.jsx)("textarea",{id:"resumen",value:O,onChange:e=>E(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Resumen del documento",rows:3,disabled:L})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"analisis",className:"block text-sm font-medium text-gray-700 mb-1",children:"An\xe1lisis"}),(0,a.jsx)("textarea",{id:"analisis",value:A,onChange:e=>F(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"An\xe1lisis del documento",rows:3,disabled:L})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"objeto",className:"block text-sm font-medium text-gray-700 mb-1",children:"Objeto"}),(0,a.jsx)("textarea",{id:"objeto",value:T,onChange:e=>z(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Objeto del documento",rows:3,disabled:L})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"correspondencia",className:"block text-sm font-medium text-gray-700 mb-1",children:"Correspondencia"}),(0,a.jsx)("textarea",{id:"correspondencia",value:M,onChange:e=>P(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Correspondencia",rows:3,disabled:L})]})]}),(0,a.jsxs)("div",{className:"mt-6 flex justify-end space-x-3 sticky bottom-0 bg-white p-4 border-t",children:[(0,a.jsx)("button",{type:"button",onClick:s,className:"px-5 py-2.5 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 font-medium",disabled:L,children:"Cancelar"}),(0,a.jsx)("button",{type:"submit",className:"px-5 py-2.5 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 font-medium",disabled:L,children:L?(0,a.jsxs)("span",{className:"flex items-center",children:[(0,a.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[(0,a.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,a.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Guardando..."]}):n?"Actualizar":"Crear"})]})]})})]})})}):null}var o=s(6691),c=s.n(o);function DetalleDocumento(e){let{documento:t,onBack:s}=e,[l,n]=(0,r.useState)("general");return(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:[(0,a.jsx)("div",{className:"p-6 border-b flex justify-between items-center",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("button",{onClick:s,className:"mr-4 text-gray-500 hover:text-gray-700",children:(0,a.jsx)(i.x_l,{})}),(0,a.jsx)("h1",{className:"text-xl font-semibold text-gray-800",children:"Detalle del Documento"})]})}),(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:t.sinopsis}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[(0,a.jsxs)("div",{className:"flex items-center text-gray-600",children:[(0,a.jsx)(i.IiJ,{className:"mr-2"}),(0,a.jsxs)("span",{children:["Fecha: ",(e=>{let t=new Date(e);return t.toLocaleDateString("es-MX",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})})(t.created_at)]})]}),(0,a.jsxs)("div",{className:"flex items-center text-gray-600",children:[(0,a.jsx)(i.mGS,{className:"mr-2"}),(0,a.jsxs)("span",{children:["Fuente: ",(e=>{switch(e){case"senado":return"Senado";case"camara":return"C\xe1mara de Diputados";case"dof":return"Diario Oficial de la Naci\xf3n";case"conamer":return"CONAMER";default:return e}})(t.fuente)]})]}),t.iniciativa_id&&(0,a.jsxs)("div",{className:"flex items-center text-gray-600",children:[(0,a.jsx)(i.mGS,{className:"mr-2"}),(0,a.jsxs)("span",{children:["ID: ",t.iniciativa_id]})]})]}),t.imagen_link&&(0,a.jsx)("div",{className:"mb-6",children:(0,a.jsx)("div",{className:"relative h-64 w-full",children:(0,a.jsx)(c(),{src:t.imagen_link,alt:t.sinopsis,fill:!0,style:{objectFit:"cover"},className:"rounded-lg"})})}),(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsxs)("div",{className:"flex border-b",children:[(0,a.jsx)("button",{className:"px-4 py-2 font-medium ".concat("general"===l?"border-b-2 border-blue-500 text-blue-600":"text-gray-500"),onClick:()=>n("general"),children:"Informaci\xf3n General"}),(0,a.jsx)("button",{className:"px-4 py-2 font-medium ".concat("detalles"===l?"border-b-2 border-blue-500 text-blue-600":"text-gray-500"),onClick:()=>n("detalles"),children:"Detalles"}),(0,a.jsx)("button",{className:"px-4 py-2 font-medium ".concat("analisis"===l?"border-b-2 border-blue-500 text-blue-600":"text-gray-500"),onClick:()=>n("analisis"),children:"An\xe1lisis"})]}),(0,a.jsxs)("div",{className:"mt-4",children:["general"===l&&(0,a.jsxs)("div",{className:"space-y-4",children:[t.iniciativa_tex&&(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-800 mb-2",children:"Texto de la Iniciativa"}),(0,a.jsx)("p",{className:"text-gray-700",children:t.iniciativa_tex})]}),t.gaceta&&(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-800 mb-2",children:"Gaceta"}),(0,a.jsx)("p",{className:"text-gray-700",children:t.gaceta})]}),t.link_iniciativa&&(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-800 mb-2",children:"Link de la Iniciativa"}),(0,a.jsxs)("a",{href:t.link_iniciativa,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline flex items-center",children:[(0,a.jsx)(i.gjK,{className:"mr-2"}),t.link_iniciativa]})]})]}),"detalles"===l&&(0,a.jsxs)("div",{className:"space-y-4",children:[t.temas&&(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-800 mb-2",children:"Temas"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:t.temas.split(",").map((e,t)=>(0,a.jsx)("span",{className:"bg-blue-100 text-blue-800 px-2 py-1 rounded-full text-sm",children:e.trim()},t))})]}),t.personas&&(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-800 mb-2",children:"Personas"}),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(i.Xws,{className:"text-gray-500 mr-2"}),(0,a.jsx)("p",{className:"text-gray-700",children:t.personas})]})]}),t.partidos&&(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-800 mb-2",children:"Partidos"}),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(i.m17,{className:"text-gray-500 mr-2"}),(0,a.jsx)("p",{className:"text-gray-700",children:t.partidos})]})]}),t.leyes&&(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-800 mb-2",children:"Leyes"}),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(i.Mp$,{className:"text-gray-500 mr-2"}),(0,a.jsx)("p",{className:"text-gray-700",children:t.leyes})]})]})]}),"analisis"===l&&(0,a.jsxs)("div",{className:"space-y-4",children:[t.resumen&&(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-800 mb-2",children:"Resumen"}),(0,a.jsx)("p",{className:"text-gray-700 whitespace-pre-line",children:t.resumen})]}),t.analisis&&(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-800 mb-2",children:"An\xe1lisis"}),(0,a.jsx)("p",{className:"text-gray-700 whitespace-pre-line",children:t.analisis})]}),t.objeto&&(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-800 mb-2",children:"Objeto"}),(0,a.jsx)("p",{className:"text-gray-700 whitespace-pre-line",children:t.objeto})]}),t.correspondencia&&(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-800 mb-2",children:"Correspondencia"}),(0,a.jsx)("p",{className:"text-gray-700 whitespace-pre-line",children:t.correspondencia})]})]})]})]}),(0,a.jsx)("div",{className:"flex justify-end",children:(0,a.jsx)("button",{onClick:s,className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",children:"Volver"})})]})]})}function DocumentosPage(){let[e,t]=(0,r.useState)([]),[s,l]=(0,r.useState)(null),[n,o]=(0,r.useState)(!1),[c,d]=(0,r.useState)(!1),[u,m]=(0,r.useState)(!0),[x,h]=(0,r.useState)(null);(0,r.useEffect)(()=>{cargarDocumentos()},[]);let cargarDocumentos=async()=>{m(!0),h(null);try{let e=await obtenerDocumentos();t(e)}catch(e){console.error("Error al cargar documentos:",e),h("Error al cargar los documentos: "+(e.message||"Error desconocido"))}finally{m(!1)}},handleSearch=async e=>{m(!0),h(null);try{let s=await buscarDocumentos(e);t(s)}catch(e){console.error("Error al buscar documentos:",e),h("Error al buscar documentos: "+(e.message||"Error desconocido"))}finally{m(!1)}};return u&&0===e.length?(0,a.jsx)("div",{className:"flex justify-center items-center h-screen",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):(0,a.jsxs)("div",{className:"container mx-auto p-4",children:[(0,a.jsxs)("div",{className:"mb-6 flex justify-between items-center",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-800",children:"Documentos Capturados"}),(0,a.jsxs)("button",{onClick:()=>{l(null),o(!0)},className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 focus:outline-none flex items-center",children:[(0,a.jsx)(i.wEH,{className:"mr-2"}),"Nuevo Documento"]})]}),x&&(0,a.jsx)("div",{className:"bg-red-50 border-l-4 border-red-500 p-4 mb-4",children:(0,a.jsx)("div",{className:"flex",children:(0,a.jsx)("div",{className:"ml-3",children:(0,a.jsx)("p",{className:"text-sm text-red-700",children:x})})})}),c&&s?(0,a.jsx)(DetalleDocumento,{documento:s,onBack:()=>{d(!1),l(null)}}):(0,a.jsx)(TablaDocumentos,{documentos:e,onEdit:e=>{l(e),o(!0)},onView:e=>{l(e),d(!0)},onRefresh:cargarDocumentos,onSearch:handleSearch}),(0,a.jsx)(DocumentoModal,{isOpen:n,onClose:()=>{o(!1),l(null)},onSuccess:cargarDocumentos,documentoActual:s})]})}},2899:function(e,t,s){"use strict";s.d(t,{O:function(){return l},p:function(){return n}});var a=s(4756);let r="https://masterd.gepdigital.ai",l=(0,a.eI)(r,"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyAgCiAgICAicm9sZSI6ICJhbm9uIiwKICAgICJpc3MiOiAic3VwYWJhc2UtZGVtbyIsCiAgICAiaWF0IjogMTY0MTc2OTIwMCwKICAgICJleHAiOiAxNzk5NTM1NjAwCn0.dc_X5iR_VP_qT0zsiyj_I_OZ2T9FtRU2BBNWN8Bu4GE"),n=(0,a.eI)(r,"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyAgCiAgICAicm9sZSI6ICJzZXJ2aWNlX3JvbGUiLAogICAgImlzcyI6ICJzdXBhYmFzZS1kZW1vIiwKICAgICJpYXQiOiAxNjQxNzY5MjAwLAogICAgImV4cCI6IDE3OTk1MzU2MDAKfQ.DaYlNEoUrrEn2Ig7tqibS-PHK5vgusbcbo7X36XVt4Q")},6304:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"RouterContext",{enumerable:!0,get:function(){return l}});let a=s(1024),r=a._(s(2265)),l=r.default.createContext(null)},1172:function(e,t,s){"use strict";s.d(t,{w_:function(){return GenIcon}});var a=s(2265),r={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},l=a.createContext&&a.createContext(r),__assign=function(){return(__assign=Object.assign||function(e){for(var t,s=1,a=arguments.length;s<a;s++)for(var r in t=arguments[s])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},__rest=function(e,t){var s={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&0>t.indexOf(a)&&(s[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,a=Object.getOwnPropertySymbols(e);r<a.length;r++)0>t.indexOf(a[r])&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(s[a[r]]=e[a[r]]);return s};function Tree2Element(e){return e&&e.map(function(e,t){return a.createElement(e.tag,__assign({key:t},e.attr),Tree2Element(e.child))})}function GenIcon(e){return function(t){return a.createElement(IconBase,__assign({attr:__assign({},e.attr)},t),Tree2Element(e.child))}}function IconBase(e){var elem=function(t){var s,r=e.attr,l=e.size,n=e.title,i=__rest(e,["attr","size","title"]),o=l||t.size||"1em";return t.className&&(s=t.className),e.className&&(s=(s?s+" ":"")+e.className),a.createElement("svg",__assign({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,r,i,{className:s,style:__assign(__assign({color:e.color||t.color},t.style),e.style),height:o,width:o,xmlns:"http://www.w3.org/2000/svg"}),n&&a.createElement("title",null,n),e.children)};return void 0!==l?a.createElement(l.Consumer,null,function(e){return elem(e)}):elem(r)}}},function(e){e.O(0,[420,36,691,971,472,744],function(){return e(e.s=1909)}),_N_E=e.O()}]);